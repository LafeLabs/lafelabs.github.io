<!DOCTYPE HTML>
<html>
<head>
<title>General Test File</title>
<script src = "libraries/geometronLibrary3.js"></script>
<script>
initGeometron();
</script>
</head>
<body>

<img id="noise1" src="https://i.imgur.com/zvWyrzL.jpg" alt="The Scream" width="600" height="600">
<canvas id="myCanvas" width="600" height="600" style="border:1px solid #d3d3d3;"></canvas>

<textarea id = "randout"></textarea>

<script>
document.getElementById("noise1").onload = function() {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var img = document.getElementById("noise1");
    ctx.drawImage(img, 0, 0);
    var imgData = ctx.getImageData(0, 0, c.width, c.height);
  
    // invert colors
    randomByteString = "";
    var i;
    for (i = 0; i < imgData.data.length/100; i += 4) {
        imgData.data[i+1] = 255 - imgData.data[i];
        
        first3bits = imgData.data[i] & 7;//redness 3 lsb's
        second3bits = (imgData.data[i+1] & 7)<<3; //greenness 3 lsb's
        third3bits = (imgData.data[i + 2] & 7)<<6; //blueness 3 lsb's
        random9bit =  first3bits + second3bits + third3bits;//combined lsb's
		
		randomByteString += "0" + random9bit.toString(8) + ",";
		    
		document.getElementById("randout").value = randomByteString;
    	console.log(imgData.data.length/4);
    }
};




</script>
<style>
</style>
</body>
</html>