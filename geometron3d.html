<!DOCTYPE html>
<html>
<head>
<title>testing testing</title>
<script src="libraries/geometronLibrary3.js">
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 <script src="https://www.x3dom.org/release/x3dom.js"></script>
    <link rel="stylesheet" href="https://www.x3dom.org/release/x3dom.css">
<script>
</script>

</head>
<body>

<div id = "mainPanel">

<center>
<div id = "big3d">
<x3d width='700px' height='450px'>
    <scene id = "canvas3d">
    </scene>    
</x3d>
</div>

<div id = "buttonPanel">
<button onClick = "doTheThing3d(0331)"> &#x2190 </button>
<button onClick = "doTheThing3d(0330)"> &#x2192 </button>

<button onClick = "doTheThing3d(0332)"> &#x2191 </button>
<button onClick = "doTheThing3d(0333)"> &#x2193 </button>

<button onClick = "doTheThing3d(0335)"> &#x2197 </button>
<button onClick = "doTheThing3d(0334)"> &#x2199 </button>

<button onClick = "doTheThing3d(0336)"> - </button>
<button onClick = "doTheThing3d(0337)"> + </button>
<button onClick = "doTheThing3d(0340)" id = "cubeButt"> cube </button>

<button onClick = "doTheThing3d(0324)" id = "redButt">    </button>
<button onClick = "doTheThing3d(0322)" id = "greenButt">    </button>
<button onClick = "doTheThing3d(0321)" id = "blueButt">    </button>

<button onClick = "doTheThing3d(0320)" id = "zeroButt">    </button>
<button onClick = "doTheThing3d(0323)" id = "sixButt">    </button>
<button onClick = "doTheThing3d(0325)" id = "fiveButt">    </button>

<button onClick = "doTheThing3d(0326)" id = "threeButt">    </button>
<button onClick = "doTheThing3d(0327)" id = "sevenButt">    </button>

</div>


<textarea id = "textIO">


</textarea>
<button style = "float:left; width:70px;" onClick = "importCode();">Import</button>
<button style = "float:left; width:70px;" onClick = "export3d();">Export</button>

</center>
</div>


<style>

html {
	height: 100%;
	background: black;
	background-size: cover;
}

button{
    border-color: white;
	width: 40px;
	height: 40px;
	background: white;
	margin: 10px 10px 10px 10px;
	padding: 5px 5px 5px 5px;
	border-radius: 10px;
	font-size: 20px;
}
#redButt{
	background:red;
}
#greenButt{
	background:green;
}
#blueButt{
	background:blue;
}

#zeroButt{
	background:#808080;
}
#threeButt{
	background:#ffff00;
}
#sevenButt{
	background:#ffffff;
}
#fiveButt{
	background:#ff00ff;
}
#sixButt{
	background:#00ffff;
}
#cubeButt{
	width: 80px;
	height: 40px;

}
#big3d{
	width: 700px;
	height: 450px;
    border-style: solid;
    border-width: 3px;
    border-color: white;
	margin: 10px 10px;
	padding: 10px 10px 10px 10px;	 
    border-radius: 20px;
	background: black;
}
#mainPanel{
	width: 800px;
	height: 700px;
    border-style: solid;
    border-width: 3px;
    border-color: white;
	margin: 5px 5px;
	padding: 10px 10px 10px 10px;	 
    border-radius: 20px;
	background: black;
}

#textIO {
	width: 500px;
	height: 50px;
	border-color: white;
    border-style: solid;
    border-width: 2px;
	background: white;
	margin: 10px 10px 10px 10px;

	border-radius: 10px;
}



</style>
<script>


init3dGeometron();

currentGlyph = "";

//drawGlyph("0340,0330,0336,0321,0340,0330,0336,0322,0340,0330,0336,0340,0323,0330,0336,0340,0330,,0325,0336,0340,");

//https://www.x3dom.org/examples/
function init3dGeometron(){
	x0 = 0;
	y0 = 0;
	z0 = 0;
	x = x0;
	y = y0;
	z = z0;
	r = 1;
	g = 0;
	b = 0;
	unit = 1;
	side = unit;
	scaleFactor	= 2;

}

function export3d(){
	document.getElementById("textIO").value = document.getElementById("canvas3d").innerHTML;

}

function importCode(){

	currentGlyph = document.getElementById("textIO").value;
	drawGlyph(currentGlyph);
}

function drawGlyph(localString){
	var tempArray = localString.split(',');
	for(var index = 0;index < tempArray.length;index++){
		doTheThing3d(parseInt(tempArray[index],8));
	}
}

function doTheThing3d(localCommand){

	currentGlyph +=  "0" + localCommand.toString(8) + ","
    document.getElementById("textIO").value = currentGlyph;
    
    if(localCommand == 0300){
       	x = x0;
		y = y0;
		z = z0;
		r = 1;
		g = 0;
		b = 0;
		unit = 1;
		side = unit;	
		r = 1;
		g = 0;
		b = 0;
		scaleFactor	= 2;

    }
    
    if(localCommand == 0320){
       r = 0.5;
       g = 0.5;
       b = 0.5;  
    }
    if(localCommand == 0321){
       r = 0;
       g = 0;
       b = 1;  
    }
    if(localCommand == 0322){
       r = 0;
       g = 1;
       b = 0;  
    }
    if(localCommand == 0323){
       r = 0;
       g = 1;
       b = 1;  
    }
    if(localCommand == 0324){
       r = 1;
       g = 0;
       b = 0;  
    }
    if(localCommand == 0325){
       r = 1;
       g = 0;
       b = 1;  
    }
    if(localCommand == 0326){
       r = 1;
       g = 1;
       b = 0;  
    }
    if(localCommand == 0327){
       r = 1;
       g = 1;
       b = 1;  
    }

    if(localCommand == 0330){
       x += side;   
    }
    if(localCommand == 0331){
       x -= side;   
    }
    if(localCommand == 0332){
       y += side;   
    }
    if(localCommand == 0333){
       y -= side;   
    }
    if(localCommand == 0334){
       z += side;   
    }
    if(localCommand == 0335){
       z -= side;   
    }
    if(localCommand == 0336){
		side /= scaleFactor;
    }
    if(localCommand == 0337){
		side *= scaleFactor;
    }

    if(localCommand == 0340){
    
    	var outputText = "";
		outputText += " \n	<transform translation = \'";
		outputText += x.toString() + " ";
		outputText += y.toString() + " ";
		outputText += z.toString() + "\' >\n";
		outputText += "<shape>";
		outputText += "<appearance>";
		outputText += " 	<material diffuseColor= \'";
		outputText += r.toString() + " ";
		outputText += g.toString() + " ";
		outputText += b.toString() + "\' ></material>\n";
		outputText += "</appearance>";
		
		outputText += " 	<box size = \'";
		outputText += side.toString() + " ";
		outputText += side.toString() + " ";
		outputText += side.toString() + "\'></box>\n";
		outputText += "</shape>\n";
		outputText += "</transform>\n";
		console.log(outputText);
		document.getElementById("canvas3d").innerHTML += outputText;

    }



}
</script>

</body>
</html>

